<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestão de Cursos - SENAI</title>
    <link rel="stylesheet" href="style_turmas.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Certifique-se de que esta regra esteja no seu arquivo style_cursos.css */
        .modal {
            display: none;
            /* Isso garante que o modal não seja visível por padrão */
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            justify-content: center;
            /* Para centralizar o modal-content */
            align-items: center;
            /* Para centralizar o modal-content */
        }
    </style>
</head>

<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="logo.png" alt="Logo SENAI" class="sidebar-logo">
                <h3>Menu Principal</h3>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="dashboard.html"><i class="fas fa-chart-line"></i> Dashboard</a></li>
                    <li><a href="gestao_cursos.html" class="active"><i class="fas fa-book"></i> Gestão de Cursos</a>
                    </li>
                    <li><a href="gestao_turmas.php"><i class="fas fa-users"></i> Gestão de Turmas</a></li>
                    <li><a href="gestao_instrutores.php"><i class="fas fa-chalkboard-teacher"></i> Gestão de
                            Instrutores</a></li>
                    <li><a href="gestao_salas.php"><i class="fas fa-door-open"></i> Gestão de Salas</a></li>
                    <li><a href="gestao_empresas.php"><i class="fas fa-building"></i> Gestão de Empresas</a></li>
                    <li><a href="gestao_unidades_curriculares.php"><i class="fas fa-graduation-cap"></i> Gestão de
                            UCs</a></li>
                    <li><a href="calendario.php"><i class="fas fa-calendar-alt"></i> Calendário</a></li>
                    <li><a href="logout.php"><i class="fas fa-sign-out-alt"></i> Sair</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <button class="menu-toggle" id="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <header class="main-header">
                <h1>Gestão de Cursos</h1>
                <button class="btn btn-primary" onclick="openModal('addCursoModal')"><i class="fas fa-plus-circle"></i>
                    Adicionar Novo Curso</button>
            </header>

            <section class="table-section">
                <h2>Cursos Cadastrados</h2>
                <div class="table-responsive">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Código</th>
                                <th>Nome do Curso</th>
                                <th>Classificação</th>
                                <th>Modalidade</th>
                                <th>Carga Horária (h)</th>
                                <th>Tipo</th>
                                <th>Categoria</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>C001</td>
                                <td>Desenvolvimento de Sistemas</td>
                                <td>UNIDADE CURRICULAR</td>
                                <td>TÉCNICO</td> <td>1200</td>
                                <td>PRESENCIAL</td>
                                <td>A</td>
                                <td class="actions">
                                    <button class="btn btn-icon btn-edit" onclick="editCurso(1)"><i class="fas fa-edit"></i></button>
                                    <button class="btn btn-icon btn-delete" onclick="deleteCurso(1)"><i class="fas fa-trash-alt"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td>C002</td>
                                <td>Gestão de Metodologias Ágeis</td>
                                <td>APERFEICOAMENTO</td>
                                <td>APERFEICOAMENTO</td>
                                <td>160</td>
                                <td>EAD</td>
                                <td>C</td>
                                <td class="actions">
                                    <button class="btn btn-icon btn-edit" onclick="editCurso(2)"><i class="fas fa-edit"></i></button>
                                    <button class="btn btn-icon btn-delete" onclick="deleteCurso(2)"><i class="fas fa-trash-alt"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td>C003</td>
                                <td>Eletricista Instalador</td>
                                <td>TÉCNICO</td> <td>TÉCNICO</td>
                                <td>1200</td>
                                <td>PRESENCIAL</td>
                                <td>A</td>
                                <td class="actions">
                                    <button class="btn btn-icon btn-edit" onclick="editCurso(3)"><i class="fas fa-edit"></i></button>
                                    <button class="btn btn-icon btn-delete" onclick="deleteCurso(3)"><i class="fas fa-trash-alt"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <div id="addCursoModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('addCursoModal')">&times;</span>
            <h2><span id="modalTitle">Adicionar Novo Curso</span></h2>
            <form id="cursoForm" action="processa_curso.php" method="POST">
                <input type="hidden" id="cursoId" name="id">
                <input type="hidden" id="action" name="action" value="add">

                <div class="form-group">
                    <label for="codigoCurso">Código do Curso:</label>
                    <input type="text" id="codigoCurso" name="codigo_curso" required>
                </div>
                <div class="form-group">
                    <label for="nomeCurso">Nome do Curso/Turma:</label>
                    <input type="text" id="nomeCurso" name="nome_curso" required>
                </div>
                <div class="form-group">
                    <label for="classificacao">Classificação:</label>
                    <select id="classificacao" name="classificacao" required>
                        <option value="">Selecione</option>
                        <option value="TURMA">TURMA</option>
                        <option value="UNIDADE CURRICULAR">UNIDADE CURRICULAR</option>
                        <option value="APERFEICOAMENTO">APERFEIÇOAMENTO</option>
                        <option value="TECNICO">TÉCNICO</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="modalidade">Modalidade:</label>
                    <select id="modalidade" name="modalidade" required>
                        <option value="">Selecione</option>
                        <option value="APERFEICOAMENTO">APERFEIÇOAMENTO</option>
                        <option value="APRENDIZAGEM">APRENDIZAGEM</option>
                        <option value="TECNICO">TÉCNICO</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="cargaHoraria">Carga Horária (h):</label>
                    <input type="number" id="cargaHoraria" name="carga_horaria" required min="1">
                </div>
                <div class="form-group">
                    <label for="tipoCurso">Tipo de Curso:</label>
                    <select id="tipoCurso" name="tipo_curso" required>
                        <option value="">Selecione</option>
                        <option value="PRESENCIAL">PRESENCIAL</option>
                        <option value="EAD">EAD</option>
                        <option value="NA EMPRESA">NA EMPRESA</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="categoria">Categoria:</label>
                    <select id="categoria" name="categoria" required>
                        <option value="">Selecione</option>
                        <option value="A">A</option>
                        <option value="C">C</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary">Salvar Curso</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('addCursoModal')">Cancelar</button>
            </form>
        </div>
    </div>

    <script>
        // Lógica para abrir/fechar modal (pode ser movida para um arquivo JS separado se houver muitos modais)
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
            document.body.classList.add('modal-open');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.classList.remove('modal-open');
            document.getElementById('cursoForm').reset();
            document.getElementById('modalTitle').textContent = 'Adicionar Novo Curso';
            document.getElementById('action').value = 'add';
            document.getElementById('cursoId').value = '';
        }

        function editCurso(id) {
            openModal('addCursoModal');
            document.getElementById('modalTitle').textContent = 'Editar Curso';
            document.getElementById('action').value = 'edit';
            document.getElementById('cursoId').value = id;

            if (id === 1) {
                document.getElementById('codigoCurso').value = 'C001';
                document.getElementById('nomeCurso').value = 'Desenvolvimento Web Full Stack';
                document.getElementById('classificacao').value = 'UNIDADE CURRICULAR';
                document.getElementById('modalidade').value = 'TECNICO';
                document.getElementById('cargaHoraria').value = '800';
                document.getElementById('tipoCurso').value = 'PRESENCIAL';
                document.getElementById('categoria').value = 'A';
            } else if (id === 2) {
                document.getElementById('codigoCurso').value = 'C002';
                document.getElementById('nomeCurso').value = 'Gestão de Projetos Ágeis';
                document.getElementById('classificacao').value = 'APERFEICOAMENTO';
                document.getElementById('modalidade').value = 'APERFEICOAMENTO';
                document.getElementById('cargaHoraria').value = '160';
                document.getElementById('tipoCurso').value = 'EAD';
                document.getElementById('categoria').value = 'C';
            } else if (id === 3) {
                document.getElementById('codigoCurso').value = 'C003';
                document.getElementById('nomeCurso').value = 'Eletricista Instalador';
                document.getElementById('classificacao').value = 'TECNICO';
                document.getElementById('modalidade').value = 'TECNICO';
                document.getElementById('cargaHoraria').value = '1200';
                document.getElementById('tipoCurso').value = 'PRESENCIAL';
                document.getElementById('categoria').value = 'A';
            }
        }

        function deleteCurso(id) {
            if (confirm('Tem certeza que deseja excluir este curso?')) {
                alert('Curso com ID ' + id + ' excluído (simulação).');
            }
        }

        window.onclick = function (event) {
            const modal = document.getElementById('addCursoModal');
            if (event.target == modal) {
                closeModal('addCursoModal');
            }
        }
    </script>
    <script>
        const menuToggle = document.getElementById('menu-toggle');
        const sidebar = document.querySelector('.sidebar');
        const dashboardContainer = document.querySelector('.dashboard-container');

        // Função para abrir/fechar o menu
        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
            dashboardContainer.classList.toggle('sidebar-active');
        });

        // Função para fechar o menu ao clicar fora dele
        dashboardContainer.addEventListener('click', (event) => {
            // Verifica se o clique foi fora da sidebar e do botão de toggle
            if (dashboardContainer.classList.contains('sidebar-active') && !sidebar.contains(event.target) && !menuToggle.contains(event.target)) {
                sidebar.classList.remove('active');
                dashboardContainer.classList.remove('sidebar-active');
            }
        });
    </script>
</body>

</html>